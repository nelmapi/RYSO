<template name="products">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="page-header">
              <h1>Productos</h1>
            </div>
            {{>productForm}}
            {{> confirmDeleteProduct}}
            <br /><br />
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Opcion</th>
                        <th>Codigo</th>
                        <th>Nombre</th>
                        <th>Tipo</th>
                        <th>Descripcion</th>
                        <th>Precio Mesa (Bs)</th>
                        <th>Precio Llevar (Bs)</th>
                    </tr>
                </thead>
                <tbody>
                {{#each productList}}
                    {{> productRow}}
                {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</template>

<template name="productRow">
    <tr class="productRow">
        <td style="display: flex">
            <a type="button" class="btn btn-danger glyphicon glyphicon-remove-circle deleteBtn"
                    data-toggle="modal"></a>
            <button type="button" class="btn btn-info glyphicon glyphicon-edit editBtn"></button>
        </td>
        <td>{{productId}}</td>
        <td>{{name}}</td>
        <td>{{type}}</td>
        <td>{{description}}</td>
        <td>{{price_mesa}}</td>
        <td>{{price_llevar}}</td>
    </tr>
</template>

<template name="productForm">
    <a class="btn btn-primary showProductFormBtn" data-toggle="modal" href='#productFormModal'>Agregar Producto</a>
    <div class="modal fade" id="productFormModal">
        <div class="modal-dialog">
            <div class="modal-content">
            {{#autoForm collection="Products" id="insertProductForm" doc=newEditProduct type="insert"}}
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Agregar Producto</h4>
                </div>
                <div class="modal-body">
                    <fieldset>
                        {{> afQuickField name='name' id='nameInput'}}
                        {{> afQuickField name='type' id='typeInput'}}
                        {{> afQuickField name='description' id='descInput'}}
                        {{> afQuickField name='price_mesa' id='priceInput'}}
                        {{> afQuickField name='price_llevar' id='price2Input'}}
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success saveBtn">Guardar</button>
                    <button type="button" class="btn btn-default cancelBtn" data-dismiss="modal">Cancelar</button>
                    
                </div>
            {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="confirmDeleteProduct">
    <div class="modal fade" id="productConfirmFormModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Eliminar Producto</h4>
                </div>
                <div class="modal-body">
                    <h6>El producto "{{product.name}}" esta siendo eliminado. Desea continuar?</h6>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger deleteConfirmBtn">Eliminar</button>
                    <button type="button" class="btn btn-default cancelConfirmBtn" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
</template>
